!function i(o,a,d){function s(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(r)return r(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,i,o,a,d)}return a[t].exports}for(var r="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(e,t,n){!async function(){sessionStorage.user=await fetch("/api/user").then(e=>e.text())}();const f=Intl.DateTimeFormat().resolvedOptions().timeZone;window.addEventListener("DOMContentLoaded",async function(){const u=JSON.parse(sessionStorage.user),n=document.getElementById("post-input"),e=(n.value="",document.getElementById("post-btn")),m=document.getElementById("posts");console.log("loaded"),e.addEventListener("click",e=>{let t={};t.description=n.value,n.disabled=!0,console.log(t,JSON.stringify(t)),fetch("/api/posts/create",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(e=>e.text()).then(e=>{n.value="",n.disabled=!1})}),fetch("/api/posts/homepage",{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.reverse(),(e=e.slice(0,100)).forEach((n,e)=>{const t=document.createElement("div"),i=document.createElement("h1"),o=document.createElement("span"),a=document.createElement("p"),d=document.createElement("i"),s=document.createElement("i"),r=document.createElement("button"),l=document.createElement("button"),c=document.createElement("textarea"),p=document.createElement("button");p.id="like_button_"+n._id,n.likes&&n.likes.includes(u._id)?(p.innerHTML="<i class='fas fa-heart liked'></i>",p.liked=!0):p.innerHTML="<i class='far fa-heart '></i>",p.addEventListener("click",e=>{const t=document.getElementById(p.id);console.log(t.classList.contains("liked"),t.className.includes("liked"),t.className),t.classList.contains("liked")||t.className.includes("liked")?(t.innerHTML="<i class='far fa-heart '></i>",t.classList.remove("liked"),console.log("unfilling")):(console.log("filling"),t.innerHTML="<i class='fas fa-heart liked'></i>")}),c.id="edit-post-textfield-"+n._id,l.addEventListener("click",async e=>{var t={description:document.getElementById("edit-post-textfield-"+n._id).value,edited:!0,LastUpdated:(new Date).toISOString()},t=(console.log(t),document.getElementById("edit-post-textfield-"+n._id).value="",await fetch("/api/posts/"+n._id+"/edit",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.status));200===t?(alert("post edited"),window.location.reload()):alert(":(")}),l.innerHTML="Edit",c.innerHTML="",s.classList="fas fa-shield-alt sheild icon",d.classList="fas fa-crown crown",o.innerHTML=new Date(n.createdAt).toLocaleString("en-US",{timeZone:f}).split(",")[0],r.innerText="Delete",r.style["background-color"]="red",r.addEventListener("click",e=>{fetch(`/api/posts/${n._id}/delete`,{method:"DELETE"}).then(e=>{204===e.status?(confirm("Post deleted"),window.location.reload()):e.text().then(e=>{console.error(e),alert(e)})})}),i.innerHTML=n.author.name,n.author.owner&&i.append(d),n.author.mod&&i.append(s),a.innerHTML=n.description,t.id=n._id,t.append(i),t.append(a),t.append(o),t.append(p),console.log(u._id===n.author._id),u._id===n.author._id&&(t.append(document.createElement("br")),t.append(r),t.append(document.createElement("br")),t.append(c),t.append(l)),m.append(t)})})})},{}]},{},[1]);
//#SourceMapUrl data:text/plain;base64,IWZ1bmN0aW9uIGkobyxhLGQpe2Z1bmN0aW9uIHModCxlKXtpZighYVt0XSl7aWYoIW9bdF0pe3ZhciBuPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFlJiZuKXJldHVybiBuKHQsITApO2lmKHIpcmV0dXJuIHIodCwhMCk7dGhyb3coZT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIit0KyInIikpLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGV9bj1hW3RdPXtleHBvcnRzOnt9fSxvW3RdWzBdLmNhbGwobi5leHBvcnRzLGZ1bmN0aW9uKGUpe3JldHVybiBzKG9bdF1bMV1bZV18fGUpfSxuLG4uZXhwb3J0cyxpLG8sYSxkKX1yZXR1cm4gYVt0XS5leHBvcnRzfWZvcih2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxlPTA7ZTxkLmxlbmd0aDtlKyspcyhkW2VdKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKGUsdCxuKXshYXN5bmMgZnVuY3Rpb24oKXtzZXNzaW9uU3RvcmFnZS51c2VyPWF3YWl0IGZldGNoKCIvYXBpL3VzZXIiKS50aGVuKGU9PmUudGV4dCgpKX0oKTtjb25zdCBmPUludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYXN5bmMgZnVuY3Rpb24oKXtjb25zdCB1PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UudXNlciksbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zdC1pbnB1dCIpLGU9KG4udmFsdWU9IiIsZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBvc3QtYnRuIikpLG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBvc3RzIik7Y29uc29sZS5sb2coImxvYWRlZCIpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGU9PntsZXQgdD17fTt0LmRlc2NyaXB0aW9uPW4udmFsdWUsbi5kaXNhYmxlZD0hMCxjb25zb2xlLmxvZyh0LEpTT04uc3RyaW5naWZ5KHQpKSxmZXRjaCgiL2FwaS9wb3N0cy9jcmVhdGUiLHtib2R5OkpTT04uc3RyaW5naWZ5KHQpLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uIn0sbWV0aG9kOiJQT1NUIn0pLnRoZW4oZT0+ZS50ZXh0KCkpLnRoZW4oZT0+e24udmFsdWU9IiIsbi5kaXNhYmxlZD0hMX0pfSksZmV0Y2goIi9hcGkvcG9zdHMvaG9tZXBhZ2UiLHtoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSkudGhlbihlPT5lLmpzb24oKSkudGhlbihlPT57ZS5yZXZlcnNlKCksKGU9ZS5zbGljZSgwLDEwMCkpLmZvckVhY2goKG4sZSk9Pntjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDEiKSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImkiKSxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImkiKSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiksYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpLHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7cC5pZD0ibGlrZV9idXR0b25fIituLl9pZCxuLmxpa2VzJiZuLmxpa2VzLmluY2x1ZGVzKHUuX2lkKT8ocC5pbm5lckhUTUw9IjxpIGNsYXNzPSdmYXMgZmEtaGVhcnQgbGlrZWQnPjwvaT4iLHAubGlrZWQ9ITApOnAuaW5uZXJIVE1MPSI8aSBjbGFzcz0nZmFyIGZhLWhlYXJ0ICc+PC9pPiIscC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZT0+e2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocC5pZCk7Y29uc29sZS5sb2codC5jbGFzc0xpc3QuY29udGFpbnMoImxpa2VkIiksdC5jbGFzc05hbWUuaW5jbHVkZXMoImxpa2VkIiksdC5jbGFzc05hbWUpLHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJsaWtlZCIpfHx0LmNsYXNzTmFtZS5pbmNsdWRlcygibGlrZWQiKT8odC5pbm5lckhUTUw9IjxpIGNsYXNzPSdmYXIgZmEtaGVhcnQgJz48L2k+Iix0LmNsYXNzTGlzdC5yZW1vdmUoImxpa2VkIiksY29uc29sZS5sb2coInVuZmlsbGluZyIpKTooY29uc29sZS5sb2coImZpbGxpbmciKSx0LmlubmVySFRNTD0iPGkgY2xhc3M9J2ZhcyBmYS1oZWFydCBsaWtlZCc+PC9pPiIpfSksYy5pZD0iZWRpdC1wb3N0LXRleHRmaWVsZC0iK24uX2lkLGwuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGFzeW5jIGU9Pnt2YXIgdD17ZGVzY3JpcHRpb246ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXQtcG9zdC10ZXh0ZmllbGQtIituLl9pZCkudmFsdWUsZWRpdGVkOiEwLExhc3RVcGRhdGVkOihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKX0sdD0oY29uc29sZS5sb2codCksZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXQtcG9zdC10ZXh0ZmllbGQtIituLl9pZCkudmFsdWU9IiIsYXdhaXQgZmV0Y2goIi9hcGkvcG9zdHMvIituLl9pZCsiL2VkaXQiLHttZXRob2Q6IlBBVENIIixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9LGJvZHk6SlNPTi5zdHJpbmdpZnkodCl9KS50aGVuKGU9PmUuc3RhdHVzKSk7MjAwPT09dD8oYWxlcnQoInBvc3QgZWRpdGVkIiksd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpKTphbGVydCgiOigiKX0pLGwuaW5uZXJIVE1MPSJFZGl0IixjLmlubmVySFRNTD0iIixzLmNsYXNzTGlzdD0iZmFzIGZhLXNoaWVsZC1hbHQgc2hlaWxkIGljb24iLGQuY2xhc3NMaXN0PSJmYXMgZmEtY3Jvd24gY3Jvd24iLG8uaW5uZXJIVE1MPW5ldyBEYXRlKG4uY3JlYXRlZEF0KS50b0xvY2FsZVN0cmluZygiZW4tVVMiLHt0aW1lWm9uZTpmfSkuc3BsaXQoIiwiKVswXSxyLmlubmVyVGV4dD0iRGVsZXRlIixyLnN0eWxlWyJiYWNrZ3JvdW5kLWNvbG9yIl09InJlZCIsci5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZT0+e2ZldGNoKGAvYXBpL3Bvc3RzLyR7bi5faWR9L2RlbGV0ZWAse21ldGhvZDoiREVMRVRFIn0pLnRoZW4oZT0+ezIwND09PWUuc3RhdHVzPyhjb25maXJtKCJQb3N0IGRlbGV0ZWQiKSx3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkpOmUudGV4dCgpLnRoZW4oZT0+e2NvbnNvbGUuZXJyb3IoZSksYWxlcnQoZSl9KX0pfSksaS5pbm5lckhUTUw9bi5hdXRob3IubmFtZSxuLmF1dGhvci5vd25lciYmaS5hcHBlbmQoZCksbi5hdXRob3IubW9kJiZpLmFwcGVuZChzKSxhLmlubmVySFRNTD1uLmRlc2NyaXB0aW9uLHQuaWQ9bi5faWQsdC5hcHBlbmQoaSksdC5hcHBlbmQoYSksdC5hcHBlbmQobyksdC5hcHBlbmQocCksY29uc29sZS5sb2codS5faWQ9PT1uLmF1dGhvci5faWQpLHUuX2lkPT09bi5hdXRob3IuX2lkJiYodC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSksdC5hcHBlbmQociksdC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSksdC5hcHBlbmQoYyksdC5hcHBlbmQobCkpLG0uYXBwZW5kKHQpfSl9KX0pfSx7fV19LHt9LFsxXSk7