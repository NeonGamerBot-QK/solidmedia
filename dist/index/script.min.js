!function i(o,a,d){function s(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(r)return r(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,i,o,a,d)}return a[t].exports}for(var r="function"==typeof require&&require,e=0;e<d.length;e++)s(d[e]);return s}({1:[function(e,t,n){!async function(){sessionStorage.user=await fetch("/api/user").then(e=>e.text())}();const f=Intl.DateTimeFormat().resolvedOptions().timeZone;window.addEventListener("DOMContentLoaded",async function(){const u=JSON.parse(sessionStorage.user),n=document.getElementById("post-input"),e=(n.value="",document.getElementById("post-btn")),m=document.getElementById("posts");console.log("loaded"),e.addEventListener("click",e=>{let t={};t.description=n.value,n.disabled=!0,console.log(t,JSON.stringify(t)),fetch("/api/posts/create",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(e=>e.text()).then(e=>{n.value="",n.disabled=!1})}),fetch("/api/posts/homepage",{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.reverse(),(e=e.slice(0,100)).forEach((n,c)=>{const e=document.createElement("div"),t=document.createElement("h1"),i=document.createElement("span"),o=document.createElement("p"),a=document.createElement("i"),p=document.createElement("i"),d=document.createElement("button"),s=document.createElement("button"),r=document.createElement("textarea"),l=document.createElement("button");l.id="like_button_"+n._id,n.likes&&n.likes.includes(u._id)?(l.innerHTML="<i class='fas fa-heart liked'></i>",l.liked=!0):l.innerHTML="<i class='far fa-heart '></i>",l.addEventListener("click",e=>{const t=document.getElementById(l.id);console.log(t.classList.contains("liked"),t.className.includes("liked"),t.className),t.classList.contains("liked")||t.className.includes("liked")?(t.innerHTML="<i class='far fa-heart '></i>",t.classList.remove("liked"),console.log("unfilling")):(console.log("filling"),t.innerHTML="<i class='fas fa-heart liked'></i>")}),r.id="edit-post-textfield-"+n._id,s.addEventListener("click",async e=>{var t={description:document.getElementById("edit-post-textfield-"+n._id).value,edited:!0,LastUpdated:(new Date).toISOString()},t=(console.log(t),document.getElementById("edit-post-textfield-"+n._id).value="",await fetch("/api/posts/"+n._id+"/edit",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.status));200===t?(alert("post edited"),window.location.reload()):alert(":(")}),s.innerHTML="Edit",r.innerHTML="",p.classList="fas fa-shield-alt sheild icon",a.classList="fas fa-crown crown",i.innerHTML=new Date(n.createdAt).toLocaleString("en-US",{timeZone:f}).split(",")[0],d.innerText="Delete",d.style["background-color"]="red",d.addEventListener("click",e=>{fetch(`/api/posts/${n._id}/delete`,{method:"DELETE"}).then(e=>{204===e.status?(confirm("Post deleted"),window.location.reload()):e.text().then(e=>{console.error(e),alert(e)})})}),t.innerHTML=n.author.name,n.author.owner&&t.append(a),n.author.mod&&t.append(p),o.innerHTML=n.description,e.id=n._id,e.append(t),e.append(o),e.append(i),e.append(l),console.log(u._id===n.author._id),u._id===n.author._id&&(e.append(document.createElement("br")),e.append(d),e.append(document.createElement("br")),e.append(r),e.append(s)),m.append(e)})})})},{}]},{},[1]);
//#SourceMapUrl data:text/plain;base64,IWZ1bmN0aW9uIGkobyxhLGQpe2Z1bmN0aW9uIHModCxlKXtpZighYVt0XSl7aWYoIW9bdF0pe3ZhciBuPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFlJiZuKXJldHVybiBuKHQsITApO2lmKHIpcmV0dXJuIHIodCwhMCk7dGhyb3coZT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIit0KyInIikpLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGV9bj1hW3RdPXtleHBvcnRzOnt9fSxvW3RdWzBdLmNhbGwobi5leHBvcnRzLGZ1bmN0aW9uKGUpe3JldHVybiBzKG9bdF1bMV1bZV18fGUpfSxuLG4uZXhwb3J0cyxpLG8sYSxkKX1yZXR1cm4gYVt0XS5leHBvcnRzfWZvcih2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxlPTA7ZTxkLmxlbmd0aDtlKyspcyhkW2VdKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKGUsdCxuKXshYXN5bmMgZnVuY3Rpb24oKXtzZXNzaW9uU3RvcmFnZS51c2VyPWF3YWl0IGZldGNoKCIvYXBpL3VzZXIiKS50aGVuKGU9PmUudGV4dCgpKX0oKTtjb25zdCBmPUludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYXN5bmMgZnVuY3Rpb24oKXtjb25zdCB1PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UudXNlciksbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zdC1pbnB1dCIpLGU9KG4udmFsdWU9IiIsZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBvc3QtYnRuIikpLG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBvc3RzIik7Y29uc29sZS5sb2coImxvYWRlZCIpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGU9PntsZXQgdD17fTt0LmRlc2NyaXB0aW9uPW4udmFsdWUsbi5kaXNhYmxlZD0hMCxjb25zb2xlLmxvZyh0LEpTT04uc3RyaW5naWZ5KHQpKSxmZXRjaCgiL2FwaS9wb3N0cy9jcmVhdGUiLHtib2R5OkpTT04uc3RyaW5naWZ5KHQpLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uIn0sbWV0aG9kOiJQT1NUIn0pLnRoZW4oZT0+ZS50ZXh0KCkpLnRoZW4oZT0+e24udmFsdWU9IiIsbi5kaXNhYmxlZD0hMX0pfSksZmV0Y2goIi9hcGkvcG9zdHMvaG9tZXBhZ2UiLHtoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSkudGhlbihlPT5lLmpzb24oKSkudGhlbihlPT57ZS5yZXZlcnNlKCksKGU9ZS5zbGljZSgwLDEwMCkpLmZvckVhY2goKG4sYyk9Pntjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDEiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImkiKSxwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImkiKSxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIikscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7bC5pZD0ibGlrZV9idXR0b25fIituLl9pZCxuLmxpa2VzJiZuLmxpa2VzLmluY2x1ZGVzKHUuX2lkKT8obC5pbm5lckhUTUw9IjxpIGNsYXNzPSdmYXMgZmEtaGVhcnQgbGlrZWQnPjwvaT4iLGwubGlrZWQ9ITApOmwuaW5uZXJIVE1MPSI8aSBjbGFzcz0nZmFyIGZhLWhlYXJ0ICc+PC9pPiIsbC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZT0+e2NvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobC5pZCk7Y29uc29sZS5sb2codC5jbGFzc0xpc3QuY29udGFpbnMoImxpa2VkIiksdC5jbGFzc05hbWUuaW5jbHVkZXMoImxpa2VkIiksdC5jbGFzc05hbWUpLHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJsaWtlZCIpfHx0LmNsYXNzTmFtZS5pbmNsdWRlcygibGlrZWQiKT8odC5pbm5lckhUTUw9IjxpIGNsYXNzPSdmYXIgZmEtaGVhcnQgJz48L2k+Iix0LmNsYXNzTGlzdC5yZW1vdmUoImxpa2VkIiksY29uc29sZS5sb2coInVuZmlsbGluZyIpKTooY29uc29sZS5sb2coImZpbGxpbmciKSx0LmlubmVySFRNTD0iPGkgY2xhc3M9J2ZhcyBmYS1oZWFydCBsaWtlZCc+PC9pPiIpfSksci5pZD0iZWRpdC1wb3N0LXRleHRmaWVsZC0iK24uX2lkLHMuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGFzeW5jIGU9Pnt2YXIgdD17ZGVzY3JpcHRpb246ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXQtcG9zdC10ZXh0ZmllbGQtIituLl9pZCkudmFsdWUsZWRpdGVkOiEwLExhc3RVcGRhdGVkOihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKX0sdD0oY29uc29sZS5sb2codCksZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXQtcG9zdC10ZXh0ZmllbGQtIituLl9pZCkudmFsdWU9IiIsYXdhaXQgZmV0Y2goIi9hcGkvcG9zdHMvIituLl9pZCsiL2VkaXQiLHttZXRob2Q6IlBBVENIIixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9LGJvZHk6SlNPTi5zdHJpbmdpZnkodCl9KS50aGVuKGU9PmUuc3RhdHVzKSk7MjAwPT09dD8oYWxlcnQoInBvc3QgZWRpdGVkIiksd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpKTphbGVydCgiOigiKX0pLHMuaW5uZXJIVE1MPSJFZGl0IixyLmlubmVySFRNTD0iIixwLmNsYXNzTGlzdD0iZmFzIGZhLXNoaWVsZC1hbHQgc2hlaWxkIGljb24iLGEuY2xhc3NMaXN0PSJmYXMgZmEtY3Jvd24gY3Jvd24iLGkuaW5uZXJIVE1MPW5ldyBEYXRlKG4uY3JlYXRlZEF0KS50b0xvY2FsZVN0cmluZygiZW4tVVMiLHt0aW1lWm9uZTpmfSkuc3BsaXQoIiwiKVswXSxkLmlubmVyVGV4dD0iRGVsZXRlIixkLnN0eWxlWyJiYWNrZ3JvdW5kLWNvbG9yIl09InJlZCIsZC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZT0+e2ZldGNoKGAvYXBpL3Bvc3RzLyR7bi5faWR9L2RlbGV0ZWAse21ldGhvZDoiREVMRVRFIn0pLnRoZW4oZT0+ezIwND09PWUuc3RhdHVzPyhjb25maXJtKCJQb3N0IGRlbGV0ZWQiKSx3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkpOmUudGV4dCgpLnRoZW4oZT0+e2NvbnNvbGUuZXJyb3IoZSksYWxlcnQoZSl9KX0pfSksdC5pbm5lckhUTUw9bi5hdXRob3IubmFtZSxuLmF1dGhvci5vd25lciYmdC5hcHBlbmQoYSksbi5hdXRob3IubW9kJiZ0LmFwcGVuZChwKSxvLmlubmVySFRNTD1uLmRlc2NyaXB0aW9uLGUuaWQ9bi5faWQsZS5hcHBlbmQodCksZS5hcHBlbmQobyksZS5hcHBlbmQoaSksZS5hcHBlbmQobCksY29uc29sZS5sb2codS5faWQ9PT1uLmF1dGhvci5faWQpLHUuX2lkPT09bi5hdXRob3IuX2lkJiYoZS5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSksZS5hcHBlbmQoZCksZS5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSksZS5hcHBlbmQociksZS5hcHBlbmQocykpLG0uYXBwZW5kKGUpfSl9KX0pfSx7fV19LHt9LFsxXSk7